// CQ Prolyfill - Copyright Martin Ausw√∂ger
// https://github.com/ausi/cq-prolyfill

!function(e,t,r){"use strict";!function(t){"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.cqApi=t(e.cqConfig)}(function(n){function i(e){l(function(){ve=!0,a(e)})}function a(e){return ve?(v(),N(),ye=!0,void o(!0,e)):i(e)}function o(e,t,r){return ye?(E(e,r),void(t&&t())):a(t)}function s(){if(!n.skipObserving){setTimeout(o),e.addEventListener("DOMContentLoaded",i.bind(r,r)),e.addEventListener("load",i.bind(r,r)),e.addEventListener("resize",o.bind(r,!0,r,r));var a=e.MutationObserver||e.WebKitMutationObserver;a?(G=new a(c),G.observe(t.documentElement,{childList:!0,subtree:!0})):(e.addEventListener("DOMNodeInserted",u),e.addEventListener("DOMNodeRemoved",u))}}function c(e){var t=[],n=!1,a=[];me.forEach(function(e){a.push(e)}),U(e).forEach(function(e){t.push.apply(t,U(e.addedNodes).filter(function(e){return 1===e.nodeType})),U(e.removedNodes).forEach(function(e){var r=t.indexOf(e);-1!==r?t.splice(r,1):"LINK"!==e.tagName&&"STYLE"!==e.tagName||-1!==a.indexOf(e)||(n=!0)})}),t.forEach(function(e){e.sheet&&-1===a.indexOf(e)&&(n=!0)}),n?i():t.length&&o(!1,r,t)}function u(e){var t={addedNodes:[],removedNodes:[]};t[("DOMNodeInserted"===e.type?"added":"removed")+"Nodes"]=[e.target],ge.push(t),setTimeout(function(){c(ge),ge=[]})}function l(e){function t(){n++,n===r.length&&e()}var r=U(be);me.forEach(function(e,t){-1===r.indexOf(t.sheet)&&-1!==r.indexOf(e.sheet)&&e.parentNode&&(r.splice(r.indexOf(e.sheet),1),e.parentNode.removeChild(e))});var n=-1;r.forEach(function(e){f(e,t)}),t()}function f(e,t){if(e.disabled)return void t();if(n.postcss){var r=-1;try{r=e.cssRules.length}catch(i){}if(-1!==r)return void t()}var a=e.ownerNode,o=a&&a.tagName;"LINK"!==o||me.has(a)?"STYLE"===o?(m(a,a.innerHTML),t()):t():p(a.href,function(r){return e.disabled||!r?void t():(m(a,d(r,a.href)),void t())})}function p(t,r){var n=!1,i=function(e){n||r(e||""),n=!0},a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&i(200===a.status&&a.responseText)};try{a.open("GET",t),a.send()}catch(o){if(e.XDomainRequest){a=new XDomainRequest,a.onprogress=function(){},a.onload=a.onerror=a.ontimeout=function(){i(a.responseText)};try{a.open("GET",t),a.send()}catch(s){i()}}else i()}}function d(e,r){var n=h(r,t.baseURI);return e.replace(ne,function(e,t,r,i){var a=r||i;return a?"url("+(t||'"')+h(a,n)+(t||'"')+")":e})}function h(e,r){var n;try{n=new URL(e,r).href}catch(i){n=!1}if(!n){var a=Ne("base");a.href=r,t.head.insertBefore(a,t.head.firstChild);var o=Ne("a");o.href=e,n=o.href,delete a.href,t.head.removeChild(a)}return n}function m(e,t){me.set(e,!1);var r=g(t),n=-1;if(r===t){try{n=e.sheet.cssRules.length}catch(i){n=-1}if(-1!==n)return}var a=Ne("style");a.textContent=r,a.media=e.media||"all",e.parentNode.insertBefore(a,e),e.sheet.disabled=!0,me.set(e,a)}function g(e){return e.replace(J,function(e){return"."+e.substr("."===e[0]?1:0).replace(/([a-z])(?:\s+|\|)([a-z])/gi,"$1\\|$2").replace(ee,"").replace(/"/g,"").replace(Z,"\\$&").toLowerCase()})}function v(){pe={};for(var e,t=0;t<be.length;t++)if(!be[t].disabled){try{if(e=be[t].cssRules,!e||!e.length)continue}catch(r){continue}for(var n=0;n<e.length;n++)y(e[n])}}function y(e){if(e.cssRules)for(var t=0;t<e.cssRules.length;t++)y(e.cssRules[t]);else 1===e.type&&b(e.selectorText).forEach(function(e){e=g(e),e.replace(Q,function(t,r,n,i,a,o,s,c){var u=(e.substr(0,c)+e.substr(c+t.length).replace(/^((?:\([^)]*\)|[^\s>+~])*).*$/,"$1")).replace(Q,"").replace(ce,"").replace(/:(?:active|hover|focus|checked|before|after)/gi,"");u.substr(-1).trim()||(u+="*");var l=[_(a),_(s)].filter(Boolean),f=n||l[0].match(re)?"n":l[0].match(te)?"l":"s";"n"===f&&(l=l.map(parseFloat)),pe[u+t]={_selector:u,_prop:_(r),_filter:n&&n.substr(2),_types:[_(i),_(o)].filter(Boolean),_values:l,_valueType:f,_className:_(t.substr(1))}})})}function _(e){return e&&e.replace(/\\(.)/g,"$1")}function b(e){return(e.match(/(?:\\.|"(?:\\.|[^"])*"|\([^)]*\)|[^,])+/g)||[]).map(function(e){return e.trim()})}function N(){he={width:{},height:{}};for(var e,t=0;t<be.length;t++)if(!be[t].disabled){try{if(e=be[t].cssRules,!e||!e.length)continue}catch(r){continue}x(e)}}function x(e){for(var t=0;t<e.length;t++)1===e[t].type?(e[t].style.getPropertyValue("width")||e[t].style.getPropertyValue("height"))&&b(g(e[t].selectorText)).forEach(function(r){var n={_selector:r,_rule:e[t],_specificity:D(r)},i=r.replace(/:[a-z-]+\([^)]*\)/i,"").replace(/^.*[^\\][\s>+~]\s*/,"");i.match(ce)||i.match(/:(?:before|after)/i)||(i=i.replace(ue,"").trim(),["width","height"].forEach(function(r){if(e[t].style.getPropertyValue(r)){var a=i.match(oe);a||(a=i.match(se)),a||(a=i.match(le),a&&(a=[a[0].toLowerCase()])),a||(a="*"),he[r][a[0]]||(he[r][a[0]]=[]),he[r][a[0]].push(n)}}))}):e[t].cssRules&&x(e[t].cssRules)}function E(e,t){if((e||!de)&&(de=H()),Object.keys(pe).length){for(var r=M(t);L(r);)w(r);w(r)}}function L(e,t){var r=!1,n,i,a,o;for(n=0;n<e.length;n++){if(i=e[n],!i._done){for(a=0;a<i._queries.length;a++){o=i._queries[a];var s=R(i._element.parentNode,o);s!==I(i._element,o._className)&&i._changes.push([s,o])}i._done=!t}r=L(i._children,t||i._changes.length)||i._changes.length||r}return r}function w(e){for(var t,r,n=0;n<e.length;n++){for(t=e[n],r=0;r<t._changes.length;r++)(t._changes[r][0]?j:A)(t._element,t._changes[r][1]._className);t._changes=[],w(t._children)}}function M(e){e=e||[t];var r=Object.keys(pe).map(function(e){return pe[e]}),n=r.map(function(e){return e._selector}).join(","),i=[];e.forEach(function(r){for(var a=r.parentNode;a;a=a.parentNode)if(-1!==e.indexOf(a))return;r!==t&&W(r,n)&&i.push(r),i.push.apply(i,U(r.querySelectorAll(n)))});var a=[],o=H();return i.forEach(function(e){if(e!==_e){for(var t={_element:e,_children:[],_queries:[],_changes:[],_done:!1},n=a,i=e.parentNode;i;i=i.parentNode)if(o.get(i)){n=o.get(i)._children;break}o.set(e,t),n.push(t),r.forEach(function(r){W(e,r._selector)&&t._queries.push(r)})}}),a}function R(e,t){var r=O(e,t._prop),n=t._values.slice(0),i,a;if(a="width"===t._prop||"height"===t._prop?P(r,t._prop):z(r).getPropertyValue(t._prop),t._filter){var o=q(a);if("h"===t._filter[0])a=o[0];else if("s"===t._filter[0])a=o[1];else if("l"===t._filter[0])a=o[2];else{if("a"!==t._filter[0])return!1;a=o[3]}}else if("l"===t._valueType){for(i=0;i<n.length;i++)n[i]=C(n[i],e);"string"==typeof a&&(a=C(a,e))}else"n"===t._valueType?a=parseFloat(a):"string"==typeof a&&(a=a.trim());if(!(">"!==t._types[0][0]&&"<"!==t._types[0][0]||"number"==typeof a&&"number"==typeof n[0]))return!1;for(i=0;i<n.length;i++)if(!(">="===t._types[i]&&a>=n[i]||"<="===t._types[i]&&a<=n[i]||">"===t._types[i]&&a>n[i]||"<"===t._types[i]&&a<n[i]||"="===t._types[i]&&a===n[i]||"!="===t._types[i]&&a!==n[i]))return!1;return!0}function O(e,t){var r;if(de.has(e)){if(r=de.get(e),r[t])return r[t]}else r={},de.set(e,r);if(e===_e)r[t]=e;else if("width"!==t&&"height"!==t)"background-color"!==t||q(z(e).getPropertyValue(t))[3]?r[t]=e:r[t]=O(e.parentNode,t);else if("inline"===z(e).display)r[t]=O(e.parentNode,t);else if(T(e,t))r[t]=e;else{for(var n=O(e.parentNode,t),i=e.parentNode;"inline"===z(i).display;)i=i.parentNode;i!==n||F(e,t)?r[t]=n:r[t]=e}return r[t]}function T(e,t){var r=S(e,t);return r&&(r.match(te)||r.match(/^calc\([^%]*\)$/i))?!0:!1}function F(e,t){var r=z(e);if("none"===r.display)return!1;if("inline"===r.display)return!0;if("width"===t&&-1!==["block","list-item","flex","grid"].indexOf(r.display)&&"none"===r.cssFloat&&"absolute"!==r.position&&"fixed"!==r.position)return!1;var n=S(e,t);return n&&n.match(te)?!1:n&&"%"===n.substr(-1)?!1:n&&"calc("===n.substr(0,5)?!1:!0}function P(e,t){var r=z(e);return"width"===t?e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.borderRightWidth)-parseFloat(r.paddingRight):e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.borderBottomWidth)-parseFloat(r.paddingBottom)}function C(t,r){var n=t.match(te);if(!n)return parseFloat(t);t=parseFloat(n[1]);var i=n[2].toLowerCase();return fe[i]?t*fe[i]:"vw"===i?t*e.innerWidth/100:"vh"===i?t*e.innerHeight/100:"vmin"===i?t*Math.min(e.innerWidth,e.innerHeight)/100:"vmax"===i?t*Math.max(e.innerWidth,e.innerHeight)/100:("rem"===i&&(r=_e),"ex"===i&&(t/=2),parseFloat(z(r).fontSize)*t)}function z(t){var r=e.getComputedStyle(t);if("inline"===r.display&&("absolute"===r.position||"fixed"===r.position||"none"!==r.cssFloat)){var n={};for(var i in r)"string"==typeof r[i]&&(n[i]=r[i]);r=n,r.display="block",r.getPropertyValue=function(e){return this[e.replace(/-+(.)/g,function(e,t){return t.toUpperCase()})]}}return r}function S(e,t){var n=[],i,a;for(n=B(V(he[t],e,t)),n.unshift({_rule:{style:e.style}}),a=0;a<n.length;a++)if((i=n[a]._rule.style.getPropertyValue(t))&&"important"===n[a]._rule.style.getPropertyPriority(t))return i;for(a=0;a<n.length;a++)if((i=n[a]._rule.style.getPropertyValue(t))&&"important"!==n[a]._rule.style.getPropertyPriority(t))return i;return r}function q(e){return e&&e.split&&e.split("(")[1]?(e=e.split("(")[1].split(",").map(parseFloat),e[3]===r&&(e[3]=1),k(e)):[0,0,0,0]}function k(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(t,r,n),a=Math.min(t,r,n),o,s,c=(i+a)/2;if(o=s=0,i!==a){var u=i-a;s=u/(c>.5?2-i-a:i+a),o=i===t?(r-n)/u+6*(n>r):i===r?(n-t)/u+2:(t-r)/u+4,o/=6}return[360*o,100*s,100*c,e[3]]}function V(e,t,r){var n=[];return t.id&&(n=n.concat(e["#"+t.id]||[])),t.className.split(/\s+/).forEach(function(t){n=n.concat(e["."+t]||[])}),n=n.concat(e[t.tagName.toLowerCase()]||[]).concat(e["*"]||[]),n.filter(function(e){return e._rule.style.getPropertyValue(r)&&(!e._rule.parentRule||4!==e._rule.parentRule.type||K(e._rule.parentRule.media.mediaText))&&W(t,e._selector)})}function W(e,t){var r=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return r.call(e,t)}function B(e){return e.map(function(e,t){return[e,t]}).sort(function(e,t){return t[0]._specificity-e[0]._specificity||t[1]-e[1]}).map(function(e){return e[0]})}function D(e){var t=0,r=0,n=0;return e.replace(Q,function(){return r++,""}).replace(J,function(){return r++,""}).replace(ie,function(){return r++,""}).replace(ae," ").replace(oe,function(){return t++,""}).replace(se,function(){return r++,""}).replace(ce,function(){return n++,""}).replace(ue,function(){return r++,""}).replace(le,function(){return n++,""}),256*t*256+256*r+n}function H(){function e(e){return s.indexOf(e)}function t(t){return c[e(t)]}function n(t){return-1!==e(t)}function i(t,r){var n=e(t);-1===n&&(n=s.push(t)-1),c[n]=r}function a(t){var r=e(t);return-1===r?!1:(delete s[r],delete c[r],!0)}function o(e){s.forEach(function(t,n){t!==r&&e(c[n],t)})}if("function"==typeof Map)return new Map;var s=[],c=[];return{set:i,get:t,has:n,"delete":a,forEach:o}}function I(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(?:^|\\s+)"+t.replace(Y,"\\$&")+"($|\\s+)"))}function j(e,t){e.classList?e.classList.add(t):I(e,t)||(e.className+=" "+t)}function A(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s+)"+t.replace(Y,"\\$&")+"($|\\s+)"),"$1")}function K(t){return e.matchMedia?e.matchMedia(t).matches:(e.styleMedia||e.media).matchMedium(t)}function U(e){if(Array.from)return Array.from(e);for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t}n=n||{};var X={reprocess:i,reparse:a,reevaluate:o,config:n},G;s();var Y=/[.?*+^$[\]\\(){}|-]/g,J=/\.?:container\(\s*"?\s*[a-z-]+(?:(?:\s+|\|)[a-z-]+)?\s*(?:[<>!=]=?)\s*[^)]+\s*\)/gi,Q=/\.\\:container\\\(([a-z-]+)(\\\|[a-z-]+)?(\\[<>!=](?:\\=)?)([^)]+?)(?:(\\[<>!=](?:\\=)?)([^)]+?))?\\\)/gi,Z=/[.:()<>!=%]/g,ee=/ /g,te=/^(-?(?:\d*\.)?\d+)(em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc)$/i,re=/^-?(?:\d*\.)?\d+$/i,ne=/url\(\s*(?:(["'])(.*?)\1|([^)\s]*))\s*\)/gi,ie=/\[.+?\]/g,ae=/:not\(/g,oe=/#[^\s\[\\#+,.:>~]+/g,se=/\.[^\s\[\\#+,.:>~]+/g,ce=/::[^\s\[\\#+,.:>~]+/g,ue=/:[^\s\[\\#+,.:>~]+/g,le=/[a-z-]+/gi,fe={px:1,pt:16/12,pc:16,"in":96,cm:96/2.54,mm:96/25.4},pe,de,he,me=H(),ge=[],ve=!1,ye=!1,_e=t.documentElement,be=t.styleSheets,Ne=t.createElement.bind(t);return X})}(window,document);
